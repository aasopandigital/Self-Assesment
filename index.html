<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Ujian Bahasa Inggris</title>

<style>
body { font-family: Arial; max-width: 900px; margin:auto; padding:20px; }
.hidden { display:none; }
#timer { color:red; font-weight:bold; margin-bottom:20px; }
.passage {
  background:#f4f4f4;
  padding:15px;
  margin:25px 0;
  border-left:5px solid #333;
}
.question { margin-bottom:18px; }
button { padding:10px 25px; font-size:16px; cursor:pointer; }
</style>
</head>

<body>

<h2>Ujian Bahasa Inggris</h2>

<div id="login">
  <p>Masukkan nama sebelum mulai:</p>
  <input type="text" id="nama">
  <br><br>
  <button onclick="start()">MULAI UJIAN</button>
</div>

<div id="quiz" class="hidden">
  <div id="timer"></div>
  <div id="questions"></div>
</div>

<script>
let waktu = 3600;
let timerInterval;

function start() {
  if (!nama.value.trim()) return alert("Masukkan nama!");
  login.style.display = "none";
  quiz.classList.remove("hidden");
  render();
  startTimer();
}

function startTimer() {
  timerInterval = setInterval(() => {
    let m = Math.floor(waktu/60);
    let s = waktu%60;
    timer.innerText = `Sisa waktu: ${m}:${s<10?"0":""}${s}`;
    waktu--;
    if (waktu < 0) selesai();
  },1000);
}

function opsi(arr){
  const huruf = ["A","B","C","D","E"];
  while(arr.length < 5) arr.push("Not stated in the text");
  return arr.map((o,i)=>`${huruf[i]}. ${o}`);
}

function soal(no, t, ops, kunci){
  const opt = opsi(ops);
  return `<div class="question"><p>${no}. ${t}</p>` +
    opt.map((o,i)=>`
      <label>
        <input type="radio" name="q${no}" value="${i}">
        ${o}
      </label><br>`).join("") +
    `</div>`;
}

function render() {
questions.innerHTML = `

<div class="passage">
<b>Text 1</b><br><br>
Learning styles differ from one student to another. Some students learn better
through visuals, others through listening or practice.<br><br>
Without understanding these preferences, students may apply ineffective strategies
and lose motivation.<br><br>
Self-awareness enables learners to study efficiently and confidently.<br><br>
Therefore, recognizing learning styles helps students maximize their potential.
</div>

${soal(1,"The text mainly discusses…",
["learning styles","exam systems","school rules","teacher authority"],0)}
${soal(2,"Students may feel frustrated because they…",
["lack intelligence","use ineffective strategies","study too much","ignore teachers"],1)}
${soal(3,"Understanding learning styles helps students to…",
["copy others","learn efficiently","avoid effort","depend on teachers"],1)}
${soal(4,"The tone of the text is…",
["emotional","informative","sarcastic","angry"],1)}
${soal(5,"The paragraph implies that success requires…",
["luck","self-awareness","competition","punishment"],1)}
${soal(6,"An effective learner is someone who…",
["studies randomly","knows personal strengths","copies friends","avoids planning"],1)}
${soal(7,"The best conclusion is…",
["All students learn the same way","Learning styles affect outcomes","Teachers control success","Time is the only factor"],1)}
${soal(8,"The main risk mentioned is…",
["overconfidence","wasted time","poor facilities","strict rules"],1)}

<div class="passage">
<b>Text 2</b><br><br>
Technology has improved access to information in education.<br><br>
However, excessive dependence on digital tools may reduce critical thinking.<br><br>
Students may accept information without evaluation.<br><br>
Thus, technology should support—not replace—independent thinking.
</div>

${soal(9,"The main issue discussed is…",
["technology access","critical thinking","internet speed","online exams"],1)}
${soal(10,"The writer’s attitude toward technology is…",
["negative","positive","balanced","unclear"],2)}
${soal(11,"Critical thinking decreases when students…",
["analyze deeply","depend excessively","read books","discuss ideas"],1)}
${soal(12,"The word excessive means…",
["balanced","too much","limited","careful"],1)}
${soal(13,"Which behavior reflects overdependence?",
["manual calculation","using apps for every answer","group discussion","reflection"],1)}
${soal(14,"The risk mentioned is…",
["faster learning","loss of judgment","higher grades","creativity"],1)}
${soal(15,"The text suggests students should…",
["avoid technology","use it wisely","depend fully","ignore applications"],1)}
${soal(16,"The best conclusion is…",
["technology replaces thinking","balance is essential","apps solve all problems","teachers are unnecessary"],1)}

<div class="passage">
<b>Text 3</b><br><br>
Failure is often seen as negative and embarrassing.<br><br>
In fact, failure helps students identify weaknesses.<br><br>
Reflection builds resilience and deeper understanding.<br><br>
Failure should be viewed as a learning opportunity.
</div>

${soal(17,"Failure is described as…",
["harmful","a learning tool","an ending","a weakness"],1)}
${soal(18,"Students benefit from failure when they…",
["ignore it","reflect on it","avoid risks","give up"],1)}
${soal(19,"The paragraph emphasizes…",
["success","reflection","competition","speed"],1)}
${soal(20,"Which student fits the text?",
["avoids challenges","evaluates mistakes","blames others","repeats errors"],1)}
${soal(21,"The tone of the text is…",
["hopeless","constructive","angry","fearful"],1)}
${soal(22,"Reflection leads to…",
["stress","resilience","confusion","delay"],1)}
${soal(23,"The best conclusion is…",
["failure guarantees success","growth requires reflection","mistakes must be hidden","challenges are harmful"],1)}

<div class="passage">
<b>Text 4</b><br><br>
Environmental damage from human activities is increasing.<br><br>
Many impacts are irreversible and long-term.<br><br>
Education raises awareness of responsible behavior.<br><br>
Sustainability depends on informed citizens.
</div>

${soal(24,"Irreversible consequences mean…",
["temporary","permanent","avoidable","minor"],1)}
${soal(25,"The best solution suggested is…",
["waiting","public awareness","technology only","punishment"],1)}
${soal(26,"The paragraph focuses on…",
["industry","education","economy","competition"],1)}
${soal(27,"The main concern is…",
["present comfort","future generations","technology","schools"],1)}
${soal(28,"Which action matches the text?",
["overusing resources","environmental education","ignoring rules","delaying action"],1)}
${soal(29,"The tone of the text is…",
["humorous","urgent","neutral","sarcastic"],1)}
${soal(30,"The best conclusion is…",
["nature heals itself","awareness ensures sustainability","damage is acceptable","growth matters more"],1)}

<br><button onclick="selesai()">SELESAI UJIAN</button>
`;
}

function selesai(){
  clearInterval(timerInterval);
  let score = 0;
  for(let i=1;i<=30;i++){
    const c = document.querySelector(`input[name="q${i}"]:checked`);
    if(c && c.value=="1") score++;
  }

  const fd = new FormData();
  fd.append("nama", nama.value);
  fd.append("skor", score);
  fd.append("total", 30);

  fetch("https://script.google.com/macros/s/AKfycbxEFXvRa3q4qfPyU_q5LnHXtYlH7w3slGKMukQ8DV9RtRxiPY8gIkIJrVtrRdOUQm36TQ/exec",
  { method:"POST", body:fd })
  .then(()=>alert("Ujian selesai\nNilai: "+score))
  .then(()=>location.reload());
}
</script>

</body>
</html>
