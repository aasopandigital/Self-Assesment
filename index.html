<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Ulangan Online Bahasa Inggris</title>

<style>
body{
  font-family: Arial, sans-serif;
  background:#f4f6f8;
}
.container{
  max-width:900px;
  margin:20px auto;
  background:#fff;
  padding:20px;
  border-radius:8px;
}
.hidden{display:none}
.question{margin-bottom:15px}
button{
  padding:10px 20px;
  font-size:16px;
  cursor:pointer;
}
#timer{
  font-weight:bold;
  color:#c0392b;
  margin-bottom:15px;
}
</style>
</head>

<body>

<div class="container">
<h2>ULANGAN ONLINE – Bahasa Inggris (SMA X)</h2>

<!-- LOGIN -->
<div id="login">
  <p>Nama:</p>
  <input id="nama" style="width:100%">
  <p>Password:</p>
  <input id="pw" type="password" style="width:100%">
  <br><br>
  <button onclick="start()">Mulai</button>
</div>

<!-- QUIZ -->
<form id="quiz" class="hidden">

<div id="timer">Sisa waktu: 60:00</div>

<p><b>Text</b><br>
Arga joined a school expedition and trusted his compass more than his friends.
During the trip, the compass failed and caused confusion.
After listening to others and observing nature, the group found their way.
Arga learned the importance of cooperation.
</p>

<div class="question">
1. What can be inferred from Arga’s decision?<br>
<input type="radio" name="q1" value="0"> A. He avoided responsibility<br>
<input type="radio" name="q1" value="1"> B. He was overconfident<br>
<input type="radio" name="q1" value="0"> C. He was careless<br>
<input type="radio" name="q1" value="0"> D. He was inexperienced<br>
<input type="radio" name="q1" value="0"> E. He was dishonest
</div>

<!-- Soal 2–30 (contoh pola) -->
<div class="question">
2. Question number 2<br>
<input type="radio" name="q2" value="0"> A<br>
<input type="radio" name="q2" value="1"> B<br>
<input type="radio" name="q2" value="0"> C<br>
<input type="radio" name="q2" value="0"> D<br>
<input type="radio" name="q2" value="0"> E
</div>

<!-- lanjutkan sampai q30 -->

<button type="button" onclick="submitQuiz()">Kirim Jawaban</button>
</form>

<div id="result"></div>

</div>

<script>
// ================= CONFIG =================
const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbxFiN037mze4ejaL2YNfisdzIL6WHJi5S6S4IzCAK7N7u7g9_bi05Taqf8q_ozkr51a/exec";
let waktu = 60 * 60; // 60 menit
let timerInterval;

// ================= LOGIN =================
function start(){
  let nama = document.getElementById("nama").value.trim();
  if(nama === ""){
    alert("Nama wajib diisi");
    return;
  }

  document.getElementById("login").classList.add("hidden");
  document.getElementById("quiz").classList.remove("hidden");
  startTimer();
}

// ================= TIMER =================
function startTimer(){
  timerInterval = setInterval(()=>{
    let menit = Math.floor(waktu/60);
    let detik = waktu % 60;
    document.getElementById("timer").innerText =
      "Sisa waktu: " + menit + ":" + (detik<10?"0":"") + detik;

    waktu--;

    if(waktu < 0){
      clearInterval(timerInterval);
      alert("Waktu habis! Jawaban dikirim otomatis.");
      submitQuiz();
    }
  },1000);
}

// ================= SUBMIT =================
function submitQuiz(){
  clearInterval(timerInterval);

  let nama = document.getElementById("nama").value.trim();
  let score = 0;

  for(let i=1;i<=30;i++){
    let q = document.querySelector('input[name="q'+i+'"]:checked');
    if(q) score += parseInt(q.value);
  }

  let nilai = Math.round(score/30*100);

  fetch(WEB_APP_URL,{
    method:"POST",
    body: JSON.stringify({
      nama: nama,
      nilai: nilai
    })
  });

  document.getElementById("result").innerHTML =
    "<h3>Nilai kamu: "+nilai+"</h3>";
}
</script>

</body>
</html>
