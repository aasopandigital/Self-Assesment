<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Ujian Bahasa Inggris</title>

<style>
body { font-family: Arial; max-width: 900px; margin: auto; padding: 20px; }
.hidden { display:none; }
#timer { color:red; font-weight:bold; margin-bottom:15px; }
.passage {
  background:#f4f4f4;
  padding:20px;
  margin:20px 0;
  border-left:5px solid #333;
  line-height:1.6;
}
.question { margin-bottom:18px; }
button { padding:10px 25px; font-size:16px; cursor:pointer; }
</style>
</head>

<body>

<h2>Ujian Bahasa Inggris</h2>

<!-- LOGIN -->
<div id="login">
  <p>Masukkan nama sebelum mulai:</p>
  <input type="text" id="nama">
  <br><br>
  <button onclick="start()">MULAI UJIAN</button>
</div>

<!-- QUIZ -->
<div id="quiz" class="hidden">
  <div id="timer"></div>
  <div id="questions"></div>
</div>

<script>
let waktu = 3600;
let timerInterval;

/* START */
function start(){
  if(!document.getElementById("nama").value.trim()){
    alert("Masukkan nama terlebih dahulu!");
    return;
  }
  localStorage.setItem("examStarted","yes");
  document.getElementById("login").style.display="none";
  document.getElementById("quiz").classList.remove("hidden");
  render();
  startTimer();
}

/* TIMER */
function startTimer(){
  timerInterval=setInterval(()=>{
    let m=Math.floor(waktu/60);
    let s=waktu%60;
    document.getElementById("timer").innerText=
      `Sisa waktu: ${m}:${s<10?"0":""}${s}`;
    waktu--;
    if(waktu<0) selesai();
  },1000);
}

/* DATA */
const data = [
{
text:`
Learning styles vary among students and influence how effectively they absorb information. Some learners understand material better through visual aids, while others prefer listening or hands-on practice.

Students who recognize their learning preferences tend to study more efficiently. They can choose suitable strategies and avoid frustration caused by ineffective methods.

Without awareness of learning styles, students may waste time using approaches that do not suit them. This often leads to lower motivation and poor academic performance.

Therefore, understanding personal learning styles helps students maximize potential and improve learning outcomes.
`,
questions:[
["The main idea of the text is…",["learning methods","learning styles","school rules","teacher roles","exam systems"],1],
["Students benefit when they…",["copy others","study longer","understand themselves","avoid planning","change teachers"],2],
["Ineffective strategies may cause…",["success","wasted time","confidence","discipline","focus"],1],
["The tone of the text is…",["critical","informative","negative","emotional","sarcastic"],1],
["The text emphasizes the importance of…",["technology","self-awareness","competition","rules","talent"],1],
["The word ‘maximize’ is closest to…",["reduce","limit","increase","avoid","ignore"],2],
["Students fail mainly because they…",["lack talent","ignore learning style","study too much","use technology","ask teachers"],1],
["The best title is…",["Teaching Methods","Effective Learning","Exam Systems","Student Failure","School Discipline"],1]
]
},

{
text:`
Technology has transformed modern education by providing flexible access to information anytime and anywhere. Online resources allow students to learn beyond classroom boundaries.

However, excessive reliance on technology may weaken students’ critical thinking skills. When answers are instantly available, learners may stop questioning information.

As a result, analytical abilities decline when students accept information without evaluation. Learning becomes passive rather than reflective.

Therefore, technology should support learning, not replace thinking processes.
`,
questions:[
["The text mainly discusses…",["technology use","online schools","teacher roles","internet dangers","student laziness"],0],
["Technology is beneficial when it…",["replaces teachers","limits thinking","supports learning","controls students","avoids discussion"],2],
["Critical thinking decreases when students…",["read books","discuss ideas","depend excessively","practice skills","ask questions"],2],
["The word ‘excessive’ means…",["balanced","limited","too much","minimal","careful"],2],
["Learning becomes passive when students…",["evaluate information","question ideas","accept answers blindly","analyze data","discuss"],2],
["The writer’s attitude is…",["negative","positive","balanced","unclear","emotional"],2],
["The last paragraph suggests that…",["technology is harmful","thinking is essential","schools are outdated","teachers are useless","learning is easy"],1],
["The best conclusion is…",["avoid technology","limit education","use technology wisely","depend fully","ignore internet"],2]
]
},

{
text:`
Failure is often seen as something negative, yet it plays an essential role in learning. Through failure, individuals recognize weaknesses.

Students who reflect on mistakes improve their strategies and gain deeper understanding. Reflection turns failure into valuable experience.

Avoiding challenges prevents growth and reduces resilience. Those who fear failure miss opportunities to learn.

Thus, failure should be viewed as a learning tool rather than an end.
`,
questions:[
["Failure is described as…",["harmful","useless","a learning tool","an ending","a weakness"],2],
["Students benefit from failure when they…",["ignore it","reflect","blame others","give up","avoid risk"],1],
["The word ‘resilience’ refers to…",["fear","strength","confusion","delay","weakness"],1],
["Avoiding challenges leads to…",["growth","success","stagnation","motivation","confidence"],2],
["The tone of the text is…",["fearful","constructive","angry","hopeless","neutral"],1],
["Failure helps students to…",["avoid study","improve strategies","lose confidence","skip effort","copy others"],1],
["The writer encourages students to…",["fear mistakes","avoid failure","learn from failure","deny errors","compete"],2]
]
},

{
text:`
Environmental problems caused by human activities continue to increase globally. Pollution and deforestation disrupt ecological balance.

Many forms of environmental damage are irreversible and threaten future generations. Once ecosystems collapse, recovery becomes difficult.

Education plays a crucial role in raising awareness and encouraging sustainable behavior. Knowledge influences responsible decision-making.

Therefore, environmental protection requires collective responsibility and immediate action.
`,
questions:[
["The main issue discussed is…",["technology","education","environment","economy","culture"],2],
["Irreversible damage means…",["temporary","avoidable","permanent","harmless","natural"],2],
["Future generations are mentioned to stress…",["urgency","tradition","economy","technology","history"],0],
["Education helps people to…",["ignore nature","act responsibly","delay action","depend on others","avoid policy"],1],
["Collective responsibility means…",["government only","everyone involved","individual choice","future duty","no action"],1],
["Immediate action is needed because…",["damage continues","nature recovers","technology solves it","time is unlimited","rules fail"],0],
["The overall message promotes…",["exploitation","balance","growth","speed","control"],1]
]
}
];

/* RENDER */
function render(){
  let html="";
  let qIndex=0;
  data.forEach(block=>{
    html+=`<div class="passage">${block.text}</div>`;
    block.questions.forEach(q=>{
      html+=`<div class="question"><p>${++qIndex}. ${q[0]}</p>`;
      q[1].forEach((o,i)=>{
        html+=`<label><input type="radio" name="q${qIndex}" value="${i}"> ${String.fromCharCode(65+i)}. ${o}</label><br>`;
      });
      html+=`</div>`;
    });
  });
  html+=`<button onclick="selesai()">SELESAI UJIAN</button>`;
  document.getElementById("questions").innerHTML=html;
}

/* FINISH */
function selesai(){
  clearInterval(timerInterval);
  localStorage.removeItem("examStarted");
  let score=0, idx=0;
  data.forEach(b=>{
    b.questions.forEach(q=>{
      const c=document.querySelector(`input[name="q${++idx}"]:checked`);
      if(c && +c.value===q[2]) score++;
    });
  });

  const fd=new FormData();
  fd.append("nama",document.getElementById("nama").value);
  fd.append("skor",score);
  fd.append("total",idx);

  fetch("https://script.google.com/macros/s/AKfycbxEFXvRa3q4qfPyU_q5LnHXtYlH7w3slGKMukQ8DV9RtRxiPY8gIkIJrVtrRdOUQm36TQ/exec",{method:"POST",body:fd})
  .then(()=>alert("Ujian selesai\nNilai: "+score))
  .then(()=>location.reload());
}

/* RESUME */
if(localStorage.getItem("examStarted")==="yes"){
  document.getElementById("login").style.display="none";
  document.getElementById("quiz").classList.remove("hidden");
  render(); startTimer();
}
</script>
</body>
</html>
