<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Ujian Bahasa Inggris</title>

<style>
body { font-family: Arial; max-width: 900px; margin:auto; padding:20px; }
.hidden { display:none; }
#timer { color:red; font-weight:bold; margin-bottom:20px; }
.passage {
  background:#f4f4f4;
  padding:15px;
  margin:25px 0;
  border-left:5px solid #333;
}
.question { margin-bottom:18px; }
button { padding:10px 25px; font-size:16px; cursor:pointer; }
</style>
</head>

<body>

<h2>Ujian Bahasa Inggris</h2>

<div id="login">
  <p>Masukkan nama sebelum mulai:</p>
  <input type="text" id="nama">
  <br><br>
  <button onclick="start()">MULAI UJIAN</button>
</div>

<div id="quiz" class="hidden">
  <div id="timer"></div>
  <div id="questions"></div>
</div>

<script>
let waktu = 3600;
let timerInterval;

/* ===== START ===== */
function start() {
  if (!nama.value.trim()) {
    alert("Masukkan nama!");
    return;
  }
  login.style.display = "none";
  quiz.classList.remove("hidden");
  render();
  startTimer();
}

/* ===== TIMER ===== */
function startTimer() {
  timerInterval = setInterval(() => {
    let m = Math.floor(waktu/60);
    let s = waktu%60;
    timer.innerText = `Sisa waktu: ${m}:${s<10?"0":""}${s}`;
    waktu--;
    if (waktu < 0) selesai();
  },1000);
}

/* ===== RENDER ===== */
function render() {
  const q = document.getElementById("questions");
  q.innerHTML = `
<!-- ================= TEXT 1 ================= -->
<div class="passage">
<b>Text 1</b><br>
Learning styles vary among students and influence academic success. Some learners
understand lessons better through visual materials, while others prefer listening
or direct practice. When students recognize their learning preferences, they can
apply effective strategies and avoid unnecessary frustration.
</div>

${soal(1,"The text mainly discusses…",["learning styles","exam systems","school rules","teachers"],0)}
${soal(2,"Students become frustrated because they…",["lack intelligence","use ineffective strategies","study too much","avoid exams"],1)}
${soal(3,"Understanding learning styles helps students to…",["copy others","learn efficiently","avoid effort","depend on teachers"],1)}
${soal(4,"The tone of the text is…",["emotional","informative","sarcastic","angry"],1)}
${soal(5,"Which learner fits the text best?",["Random learner","Reflective learner","Passive learner","Unmotivated learner"],1)}
${soal(6,"The paragraph implies success requires…",["luck","self-awareness","competition","punishment"],1)}
${soal(7,"The best conclusion is…",["All students learn the same way","Learning styles affect outcomes","Teachers determine success","Time is the only factor"],1)}
${soal(8,"An effective strategy means…",["using one method","choosing suitable methods","studying longer","avoiding feedback"],1)}

<!-- ================= TEXT 2 ================= -->
<div class="passage">
<b>Text 2</b><br>
Technology has transformed education by providing easy access to information.
However, excessive dependence on digital tools can weaken critical thinking.
Students who rely too much on applications often accept information without
questioning its accuracy.
</div>

${soal(9,"The main issue discussed is…",["technology access","critical thinking","internet speed","online exams"],1)}
${soal(10,"The writer’s view on technology is…",["negative","positive","balanced","unclear"],2)}
${soal(11,"Critical thinking decreases when students…",["analyze deeply","depend excessively","read books","discuss ideas"],1)}
${soal(12,"The word excessive means…",["balanced","too much","limited","careful"],1)}
${soal(13,"Which behavior reflects overdependence?",["Manual calculation","Using apps for every answer","Group discussion","Reflection"],1)}
${soal(14,"The risk mentioned is…",["faster learning","loss of judgment","higher grades","creativity"],1)}
${soal(15,"The paragraph suggests students should…",["avoid technology","use wisely","depend fully","ignore apps"],1)}
${soal(16,"The best conclusion is…",["Technology replaces thinking","Balance is essential","Apps solve problems","Teachers are unnecessary"],1)}

<!-- ================= TEXT 3 ================= -->
<div class="passage">
<b>Text 3</b><br>
Failure is often seen as negative, yet it plays an important role in learning.
Through failure, students identify weaknesses and improve strategies. Those who
reflect on mistakes develop resilience and deeper understanding.
</div>

${soal(17,"Failure is described as…",["harmful","a learning tool","an ending","a weakness"],1)}
${soal(18,"Students benefit from failure when they…",["ignore it","reflect on it","avoid risks","give up"],1)}
${soal(19,"The text emphasizes…",["success","reflection","competition","speed"],1)}
${soal(20,"Which student fits the text?",["Avoids challenges","Evaluates mistakes","Blames others","Repeats errors"],1)}
${soal(21,"The tone of the text is…",["hopeless","constructive","angry","fearful"],1)}
${soal(22,"Reflection leads to…",["stress","resilience","confusion","delay"],1)}
${soal(23,"The best conclusion is…",["Failure guarantees success","Growth needs reflection","Mistakes must be hidden","Challenges are harmful"],1)}

<!-- ================= TEXT 4 ================= -->
<div class="passage">
<b>Text 4</b><br>
Environmental damage caused by human activities often leads to irreversible
consequences. Raising public awareness through education and responsible policies
is essential for sustainable development.
</div>

${soal(24,"Irreversible consequences mean…",["temporary","permanent","avoidable","minor"],1)}
${soal(25,"The main solution suggested is…",["waiting","public awareness","technology only","punishment"],1)}
${soal(26,"The paragraph focuses on…",["industry","education","economy","competition"],1)}
${soal(27,"The main risk concerns…",["present comfort","future generations","technology","schools"],1)}
${soal(28,"Which action aligns with the text?",["Overusing resources","Environmental education","Ignoring rules","Delaying action"],1)}
${soal(29,"The tone of the text is…",["humorous","urgent","neutral","sarcastic"],1)}
${soal(30,"The best conclusion is…",["Nature heals itself","Awareness ensures sustainability","Damage is acceptable","Growth matters more"],1)}

<br><button onclick="selesai()">SELESAI UJIAN</button>
`;
}

/* ===== SOAL TEMPLATE ===== */
function soal(no, t, o, a){
  return `
  <div class="question">
    <p>${no}. ${t}</p>
    ${o.map((x,i)=>`<label><input type="radio" name="q${no}" value="${i}"> ${x}</label><br>`).join("")}
  </div>`;
}

/* ===== FINISH ===== */
function selesai(){
  clearInterval(timerInterval);
  let score = 0;
  for(let i=1;i<=30;i++){
    let c = document.querySelector(`input[name="q${i}"]:checked`);
    if(c && c.value=="1") score++;
  }

  const fd = new FormData();
  fd.append("nama", nama.value);
  fd.append("skor", score);
  fd.append("total", 30);

  fetch("https://script.google.com/macros/s/AKfycbxEFXvRa3q4qfPyU_q5LnHXtYlH7w3slGKMukQ8DV9RtRxiPY8gIkIJrVtrRdOUQm36TQ/exec",
  { method:"POST", body:fd })
  .then(()=>alert("Ujian selesai\nNilai: "+score))
  .then(()=>location.reload());
}
</script>

</body>
</html>
